<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>Messages - Safety App</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            primary: '#000000',
            secondary: '#FFFFFF',
            accent: '#AAAAAA',
            surface: '#000000',
            'surface-light': '#1A1A1A',
            'text-primary': '#FFFFFF',
            'text-secondary': '#CCCCCC',
            'border-light': '#333333',
          }
        }
      }
    }
  </script>
  <style>
    :root {
      --primary: #000000;
      --secondary: #FFFFFF;
      --accent: #AAAAAA;
      --surface: #000000;
      --surface-light: #1A1A1A;
      --text-primary: #FFFFFF;
      --text-secondary: #CCCCCC;
      --border-light: #333333;
      --radius: 16px;
      --shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
    }
    * {
      box-sizing: border-box;
    }
    body {
      font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: var(--surface);
      height: 100vh;
      overflow: hidden;
      margin: 0;
      transition: background 0.3s ease;
    }
    body.light {
      --primary: #FFFFFF;
      --secondary: #000000;
      --accent: #666666;
      --surface: #F5F5F7;
      --surface-light: #FFFFFF;
      --text-primary: #000000;
      --text-secondary: #666666;
      --border-light: #E5E5E7;
      background: var(--surface);
    }
    #app-container {
      height: 100vh;
      display: flex;
      flex-direction: column;
      background: transparent;
    }
    .content {
      flex: 1;
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
    }
    .content::-webkit-scrollbar { display: none; }
    .card {
      background: var(--surface-light);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      border: 1px solid var(--border-light);
      position: relative;
      overflow: hidden;
    }
    .btn {
      background: transparent;
      color: var(--text-primary);
      border: 2px solid var(--secondary);
      border-radius: 12px;
      padding: 14px 24px;
      font-weight: 600;
      font-size: 16px;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }
    .btn:active {
      transform: scale(0.98);
      background: rgba(255, 255, 255, 0.1);
    }
    .btn-filled {
      background: var(--secondary);
      color: var(--primary);
      border: 2px solid var(--secondary);
    }
    .input {
      background: var(--surface);
      border: 1px solid var(--border-light);
      border-radius: 12px;
      padding: 12px 16px;
      color: var(--text-primary);
      font-size: 16px;
      transition: border-color 0.3s ease;
    }
    .input:focus {
      outline: none;
      border-color: var(--secondary);
      box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.1);
    }
    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: var(--surface);
      border-top: 1px solid var(--border-light);
      display: flex;
      justify-content: space-around;
      padding: 8px 0;
      z-index: 100;
    }
    .nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      color: var(--text-secondary);
      text-decoration: none;
      padding: 8px;
      border-radius: 12px;
      transition: all 0.3s ease;
      min-width: 60px;
    }
    .nav-item.active {
      color: var(--secondary);
      background: rgba(255, 255, 255, 0.1);
    }
    .section-title {
      font-size: 20px;
      font-weight: 700;
      color: var(--text-primary);
      margin: 20px 0 14px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .section-title svg {
      width: 20px;
      height: 20px;
      color: var(--secondary);
    }
    .theme-toggle {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 100;
      background: var(--surface-light);
      border: 1px solid var(--border-light);
      border-radius: 50%;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: var(--shadow);
    }
    .conversation-header {
      display: flex;
      align-items: center;
      padding: 16px;
      border-bottom: 1px solid var(--border-light);
      background: var(--surface-light);
      position: sticky;
      top: 0;
      z-index: 10;
    }
    .conversation-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      overflow: hidden;
      margin-right: 12px;
    }
    .conversation-avatar img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    .conversation-info {
      flex: 1;
    }
    .conversation-name {
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 2px;
    }
    .conversation-status {
      font-size: 12px;
      color: var(--text-secondary);
    }
    .conversation-actions {
      display: flex;
      gap: 12px;
    }
    .conversation-action {
      background: none;
      border: none;
      color: var(--text-secondary);
      padding: 8px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .messages-container {
      padding: 16px;
      display: flex;
      flex-direction: column;
      gap: 16px;
      min-height: calc(100vh - 200px);
    }
    .message {
      display: flex;
      max-width: 80%;
    }
    .message.received {
      align-self: flex-start;
    }
    .message.sent {
      align-self: flex-end;
      flex-direction: row-reverse;
    }
    .message-avatar {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      overflow: hidden;
      flex-shrink: 0;
    }
    .message-avatar img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    .message.received .message-avatar {
      margin-right: 8px;
    }
    .message.sent .message-avatar {
      margin-left: 8px;
    }
    .message-bubble {
      padding: 12px 16px;
      border-radius: 18px;
      position: relative;
    }
    .message.received .message-bubble {
      background: var(--surface);
      border: 1px solid var(--border-light);
      border-top-left-radius: 4px;
    }
    .message.sent .message-bubble {
      background: var(--secondary);
      color: var(--primary);
      border-top-right-radius: 4px;
    }
    .message-text {
      margin: 0;
      line-height: 1.4;
    }
    .message-time {
      font-size: 11px;
      opacity: 0.7;
      margin-top: 4px;
      text-align: right;
    }
    .message.received .message-time {
      text-align: left;
    }
    .input-container {
      display: flex;
      padding: 16px;
      background: var(--surface-light);
      border-top: 1px solid var(--border-light);
      gap: 12px;
      align-items: flex-end;
    }
    .message-input {
      flex: 1;
      background: var(--surface);
      border: 1px solid var(--border-light);
      border-radius: 24px;
      padding: 12px 16px;
      color: var(--text-primary);
      font-size: 16px;
      resize: none;
      max-height: 120px;
      min-height: 44px;
    }
    .message-input:focus {
      outline: none;
      border-color: var(--secondary);
    }
    .send-button {
      background: var(--secondary);
      color: var(--primary);
      border: none;
      border-radius: 50%;
      width: 44px;
      height: 44px;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }
    .attachment-button {
      background: none;
      border: none;
      color: var(--text-secondary);
      padding: 10px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .typing-indicator {
      display: flex;
      align-items: center;
      padding: 8px 16px;
      color: var(--text-secondary);
      font-size: 14px;
    }
    .typing-dots {
      display: flex;
      margin-left: 8px;
    }
    .typing-dot {
      width: 4px;
      height: 4px;
      border-radius: 50%;
      background: var(--text-secondary);
      margin: 0 2px;
      animation: typing 1.4s infinite ease-in-out;
    }
    .typing-dot:nth-child(1) { animation-delay: -0.32s; }
    .typing-dot:nth-child(2) { animation-delay: -0.16s; }
    @keyframes typing {
      0%, 80%, 100% { transform: scale(0); }
      40% { transform: scale(1); }
    }
    .empty-conversation {
      text-align: center;
      padding: 40px 20px;
      color: var(--text-secondary);
    }
    .empty-conversation svg {
      width: 64px;
      height: 64px;
      margin-bottom: 16px;
      color: var(--accent);
    }
    @media (max-width: 480px) {
      .section-title { font-size: 18px; }
      .btn { font-size: 14px; padding: 12px 16px; }
      .section-title svg { width: 18px; height: 18px; }
      .message { max-width: 90%; }
    }
  </style>
</head>
<body>
  <div id="app-container">
    <!-- Conversation Header -->
    <div class="conversation-header">
      <a href="inbox.html" class="p-2 rounded-full bg-white/10 mr-2">
        <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
        </svg>
      </a>
      <div class="conversation-avatar">
        <img src="https://images.unsplash.com/photo-1494790108755-2616b612b786?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=100&q=80" alt="Sarah M">
      </div>
      <div class="conversation-info">
        <div class="conversation-name">Sarah M.</div>
        <div class="conversation-status">Online â€¢ 0.2 km away</div>
      </div>
      <div class="conversation-actions">
        <button class="conversation-action" onclick="callUser()">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
          </svg>
        </button>
        <button class="conversation-action" onclick="viewProfile()">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
          </svg>
        </button>
      </div>
    </div>

    <!-- Theme Toggle -->
    <div class="theme-toggle" onclick="toggleTheme()">
      <svg id="theme-icon" class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
      </svg>
    </div>

    <!-- Messages Content -->
    <div class="content">
      <div class="messages-container" id="messagesContainer">
        <!-- Date Separator -->
        <div style="text-align: center; margin: 20px 0;">
          <span style="background: var(--surface-light); padding: 4px 12px; border-radius: 12px; font-size: 12px; color: var(--text-secondary);">Today</span>
        </div>

        <!-- Received Message -->
        <div class="message received">
          <div class="message-avatar">
            <img src="https://images.unsplash.com/photo-1494790108755-2616b612b786?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=100&q=80" alt="Sarah M">
          </div>
          <div class="message-bubble">
            <p class="message-text">Hey! I noticed some suspicious activity near the park earlier today. Have you seen anything unusual?</p>
            <div class="message-time">10:24 AM</div>
          </div>
        </div>

        <!-- Sent Message -->
        <div class="message sent">
          <div class="message-avatar">
            <img src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=100&q=80" alt="You">
          </div>
          <div class="message-bubble">
            <p class="message-text">No, I haven't noticed anything. What did you see exactly?</p>
            <div class="message-time">10:26 AM</div>
          </div>
        </div>

        <!-- Received Message -->
        <div class="message received">
          <div class="message-avatar">
            <img src="https://images.unsplash.com/photo-1494790108755-2616b612b786?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=100&q=80" alt="Sarah M">
          </div>
          <div class="message-bubble">
            <p class="message-text">There was a van parked near the playground for over an hour with someone inside just watching. I've already reported it to the neighborhood watch.</p>
            <div class="message-time">10:28 AM</div>
          </div>
        </div>

        <!-- Sent Message -->
        <div class="message sent">
          <div class="message-avatar">
            <img src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=100&q=80" alt="You">
          </div>
          <div class="message-bubble">
            <p class="message-text">Thanks for letting me know. I'll keep an eye out. Did you get the license plate number?</p>
            <div class="message-time">10:30 AM</div>
          </div>
        </div>

        <!-- Received Message with Image -->
        <div class="message received">
          <div class="message-avatar">
            <img src="https://images.unsplash.com/photo-1494790108755-2616b612b786?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=100&q=80" alt="Sarah M">
          </div>
          <div class="message-bubble">
            <p class="message-text">Yes, I took a photo from a distance. Here it is:</p>
            <div class="message-image" style="margin-top: 8px;">
              <img src="https://images.unsplash.com/photo-1543465077-db45d34b88a5?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=200&q=80" alt="Suspicious van" style="width: 100%; border-radius: 8px;">
            </div>
            <div class="message-time">10:32 AM</div>
          </div>
        </div>

        <!-- Typing Indicator -->
        <div class="typing-indicator" id="typingIndicator" style="display: none;">
          Sarah M. is typing
          <div class="typing-dots">
            <div class="typing-dot"></div>
            <div class="typing-dot"></div>
            <div class="typing-dot"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Message Input -->
    <div class="input-container">
      <button class="attachment-button" onclick="attachFile()">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13" />
        </svg>
      </button>
      <textarea class="message-input" id="messageInput" placeholder="Type a message..." rows="1"></textarea>
      <button class="send-button" id="sendButton" onclick="sendMessage()">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" />
        </svg>
      </button>
    </div>

    <!-- Bottom Navigation -->
    <div class="bottom-nav">
      <a href="index.html" class="nav-item">
        <svg class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path></svg>
        <span class="text-xs">Home</span>
      </a>
      <a href="alert.html" class="nav-item">
        <svg class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
        <span class="text-xs">Alerts</span>
      </a>
      <a href="funds.html" class="nav-item">
        <svg class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2 2z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7V5a2 2 0 012-2h6a2 2 0 012 2v2"></path></svg>
        <span class="text-xs">Funds</span>
      </a>
      <a href="services.html" class="nav-item">
        <svg class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
        <span class="text-xs">Service</span>
      </a>
      <a href="inbox.html" class="nav-item active">
        <svg class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4" /></svg>
        <span class="text-xs">Inbox</span>
      </a>
    </div>
  </div>

  <script>
    // Theme toggle
    function toggleTheme() {
      const body = document.body;
      const themeIcon = document.getElementById('theme-icon');
      
      if (body.classList.contains('light')) {
        body.classList.remove('light');
        themeIcon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />';
      } else {
        body.classList.add('light');
        themeIcon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />';
      }
    }

    // Auto-resize textarea
    const messageInput = document.getElementById('messageInput');
    messageInput.addEventListener('input', function() {
      this.style.height = 'auto';
      this.style.height = (this.scrollHeight) + 'px';
    });

    // Send message function
    function sendMessage() {
      const messageText = messageInput.value.trim();
      if (messageText === '') return;

      // Create new message element
      const messagesContainer = document.getElementById('messagesContainer');
      const newMessage = document.createElement('div');
      newMessage.className = 'message sent';
      newMessage.innerHTML = `
        <div class="message-avatar">
          <img src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=100&q=80" alt="You">
        </div>
        <div class="message-bubble">
          <p class="message-text">${messageText}</p>
          <div class="message-time">${getCurrentTime()}</div>
        </div>
      `;

      // Add to messages container
      messagesContainer.appendChild(newMessage);
      
      // Clear input and reset height
      messageInput.value = '';
      messageInput.style.height = 'auto';
      
      // Scroll to bottom
      messagesContainer.scrollTop = messagesContainer.scrollHeight;
      
      // Simulate typing indicator and response
      simulateResponse();
    }

    // Get current time in HH:MM format
    function getCurrentTime() {
      const now = new Date();
      return now.getHours().toString().padStart(2, '0') + ':' + 
             now.getMinutes().toString().padStart(2, '0');
    }

    // Simulate typing and response
    function simulateResponse() {
      const typingIndicator = document.getElementById('typingIndicator');
      const messagesContainer = document.getElementById('messagesContainer');
      
      // Show typing indicator
      typingIndicator.style.display = 'flex';
      messagesContainer.scrollTop = messagesContainer.scrollHeight;
      
      // Hide typing indicator after 2 seconds and show response
      setTimeout(() => {
        typingIndicator.style.display = 'none';
        
        const responses = [
          "Thanks for the update. I'll keep an eye out too.",
          "I just checked and everything seems normal now.",
          "The neighborhood watch is increasing patrols in our area.",
          "Have you reported this to the authorities?",
          "Let me know if you see anything else suspicious."
        ];
        
        const randomResponse = responses[Math.floor(Math.random() * responses.length)];
        
        const responseMessage = document.createElement('div');
        responseMessage.className = 'message received';
        responseMessage.innerHTML = `
          <div class="message-avatar">
            <img src="https://images.unsplash.com/photo-1494790108755-2616b612b786?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=100&q=80" alt="Sarah M">
          </div>
          <div class="message-bubble">
            <p class="message-text">${randomResponse}</p>
            <div class="message-time">${getCurrentTime()}</div>
          </div>
        `;
        
        messagesContainer.appendChild(responseMessage);
        messagesContainer.scrollTop = messagesContainer.scrollHeight;
      }, 2000);
    }

    // Send message on Enter key (but allow Shift+Enter for new line)
    messageInput.addEventListener('keydown', function(e) {
      if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        sendMessage();
      }
    });

    // Call user function
    function callUser() {
      alert('Calling Sarah M...');
    }

    // View profile function
    function viewProfile() {
      alert('Viewing Sarah M. profile...');
    }

    // Attach file function
    function attachFile() {
      alert('Attachment options would appear here');
    }

    // Scroll to bottom on load
    window.addEventListener('load', function() {
      const messagesContainer = document.getElementById('messagesContainer');
      messagesContainer.scrollTop = messagesContainer.scrollHeight;
    });
  </script>
</body>
</html>